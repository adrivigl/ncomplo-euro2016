<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

  <head th:substituteby="layout/header :: head"></head>
  
  <body>
  
    <header th:substituteby="layout/header :: header"></header>
  
    <div class="container">
    
        <h1><span th:text="#{bets.title}">Manage bets for league</span> "<span th:text="${league.getName(#locale)}">league</span>"</h1>
        
        <div th:if="${message}" class="message">
            <p th:text="${message}">Message</p>
        </div>
        <div th:if="${error}" class="error">
            <p th:text="${error}">Error</p>
        </div>
        
        <div class="row">
            <form method="POST" enctype="multipart/form-data" th:action="@{/upload}">
                <input type="hidden" th:value="${league.id}" name="leagueId" />
                <table>
                    <tr><td>File to upload:</td><td><input type="file" name="file" /></td></tr>
                    <tr><td></td><td><input type="submit" value="Upload" /></td></tr>
                </table>
            </form>
        </div>
        
        <form th:action="@{save}" th:object="${participation}" method="post">
          
          <fieldset>
          
            <input type="hidden" th:field="*{login}" />
            <input type="hidden" th:field="*{leagueId}" />
          
            <div>
            
              <table id="bets" class="table table-striped table-bordered" >
              	<thead>
              		<tr>
              			<th><span th:text="#{bets.header.round}">Round</span></th>
              			<th><span th:text="#{bets.header.date}">Date</span></th>
              			<th></th>
              			<th></th>
              			<th></th>
              			<th><span th:text="#{bets.header.match.sideA}">Score A</span></th>
              			<th><span th:text="#{bets.header.match.sideB}">Score B</span></th>
              		</tr>
              	</thead>
                <tr th:each="g : ${allGames}">
                  <td>
                    <input type="hidden" th:field="*{betsByGame[__${g.id}__].id}" />
                    <input type="hidden" th:field="*{betsByGame[__${g.id}__].betTypeId}" />
                    <input type="hidden" th:field="*{betsByGame[__${g.id}__].gameId}" />
                    <input type="hidden" th:field="*{betsByGame[__${g.id}__].id}" />
                    <span th:text="${g.round.getName(#locale)}">round of game</span>
                  </td>
                  <td>
                    <span th:text="${g.date} ? ${#dates.format(g.date,#messages.msg('dates.format'))} : '-'">2012-06-02</span>
                  </td>
                  <td th:text="${g.getName(#locale)}">name of game</td>
                  
                  
                  <td th:if="${g.gameSideA}">
                  	<span th:text="${g.gameSideA.getName(#locale)}">Game side a</span>
               	  </td>
               	  <td th:if="${g.gameSideB}">
                  	<span th:text="${g.gameSideB.getName(#locale)}">Game side b</span>
               	  </td>
               	  
                  <td th:unless="${g.gameSideA}">
                    <select th:field="*{betsByGame[__${g.id}__].gameSideAId}">
                      <option value="">Undefined</option>
                      <option th:each="gs : ${allGameSides}" th:value="${gs.id}" th:text="${gs.getName(#locale)}">game side</option>
                    </select>
                  </td>
                  <td th:unless="${g.gameSideB}">
                    <select th:field="*{betsByGame[__${g.id}__].gameSideBId}">
                      <option value="">Undefined</option>
                      <option th:each="gs : ${allGameSides}" th:value="${gs.id}" th:text="${gs.getName(#locale)}">game side</option>
                    </select>
                  </td>
                  <td>
                    <input type="number" th:field="*{betsByGame[__${g.id}__].scoreA}" />
                  </td>
                  <td>
                    <input type="number" th:field="*{betsByGame[__${g.id}__].scoreB}" />
                  </td>
                </tr>
              </table>
              
            </div>
          
          </fieldset>
          
          <input type="submit" />
          
        </form>
        
        <a th:href="@{/scoreboard}">Back to scoreboard</a>
        
    </div>
    
  </body>
  
</html>